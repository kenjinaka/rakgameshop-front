{"remainingRequest":"C:\\ws\\rak-front\\rakgameshop_client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ws\\rak-front\\rakgameshop_client\\src\\components\\JogoCompra.vue?vue&type=style&index=0&id=a40cd50a&scoped=true&lang=css&","dependencies":[{"path":"C:\\ws\\rak-front\\rakgameshop_client\\src\\components\\JogoCompra.vue","mtime":1655942081513},{"path":"C:\\ws\\rak-front\\rakgameshop_client\\node_modules\\css-loader\\dist\\cjs.js","mtime":1655946243399},{"path":"C:\\ws\\rak-front\\rakgameshop_client\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1655946253514},{"path":"C:\\ws\\rak-front\\rakgameshop_client\\node_modules\\postcss-loader\\src\\index.js","mtime":1655946247935},{"path":"C:\\ws\\rak-front\\rakgameshop_client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655946238528},{"path":"C:\\ws\\rak-front\\rakgameshop_client\\node_modules\\vue-loader\\lib\\index.js","mtime":1655946250137}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZGV0YWlsLWNvbnRhaW5lcnsKICAgIGNvbG9yOiAjZmZmZjsKfQoKLmJ0dC1zdWJtaXR7CiAgICBjb2xvcjogI2ZmZmY7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzQwRTgwOwp9CgouYnR0LXN1Ym1pdDpob3ZlcnsKICAgIGNvbG9yOiAjZmZmZjsKICAgIGJhY2tncm91bmQtY29sb3I6ICM3ZTY0YjM7Cn0KCi5idHQtb3V0bGluZS1zdWJtaXR7CiAgICBjb2xvcjogI2ZmZmY7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjMzQwRTgwOwp9CgouYnR0LW91dGxpbmUtc3VibWl0OmhvdmVyewogICAgY29sb3I6ICNmZmZmOwogICAgYm9yZGVyOiAxcHggc29saWQgIzM0MEU4MDsKICAgIGJhY2tncm91bmQtY29sb3I6ICM0MTNmM2Y7Cn0K"},{"version":3,"sources":["JogoCompra.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2MA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"JogoCompra.vue","sourceRoot":"src/components","sourcesContent":["<script>\r\n    import HeaderBar from \"./shared/HeaderBarBag.vue\";\r\n    import FooterBar from \"./shared/FooterBar.vue\";\r\n\r\n    export default {\r\n        components: {\r\n            HeaderBar,\r\n            FooterBar\r\n        },\r\n        data(){\r\n            return{\r\n                id: this.$route.params.id.replace(\":\", \"\"),\r\n                jogo: {},\r\n                jogos: [],\r\n                usuario: {},\r\n                cliente: {},\r\n                message: \"\",\r\n                messageError: \"\",\r\n                messageButton: 'Adicionar jogo à sacola',\r\n                disabledButton: false,\r\n                spawnCompra: true,\r\n                spawnDownload: false\r\n            }\r\n            \r\n        },\r\n        mounted(){\r\n            this.atualizaPagina();\r\n        },\r\n        methods: {\r\n            atualizaPagina(){\r\n                this.usuario = this.$root.usuario;\r\n                if(this.usuario == null){\r\n                    return this.$router.push({ name: 'login' })\r\n                }\r\n                this.$http.get('http://localhost:5000/api/admin/buscarjogos').then(res =>{\r\n                    this.jogos = res.body;\r\n                    this.jogos.map(j => {   \r\n                        if(j.id == this.id){\r\n                            this.jogo = j;\r\n                        }\r\n                    })\r\n                }, res => {\r\n                    console.log(res);\r\n                });\r\n                this.$http.post('http://localhost:5000/api/cliente/buscarcliente', this.usuario).then(res =>{\r\n                    this.cliente = res.body;\r\n                    this.validarJogo();\r\n                }, res => {\r\n                    console.log(res);\r\n                });\r\n            },\r\n            formatDate(date) {\r\n                let d = new Date(date);\r\n                let month = (d.getMonth() + 1).toString();\r\n                let day = d.getDate().toString();\r\n                let year = d.getFullYear();\r\n                if (month.length < 2) {\r\n                    month = '0' + month;\r\n                }\r\n                if (day.length < 2) {\r\n                    day = '0' + day;\r\n                }\r\n                return [day, month, year].join('/');\r\n            },\r\n            pushPedido(){\r\n                let j = []\r\n                j.push(this.jogo);\r\n                this.pedido = {\r\n                    Cliente: this.cliente,\r\n                    Jogos: j,\r\n                    DataCompra: \"\",\r\n                    FormaPagamento: null,\r\n                    ValorTotal: 0,\r\n                    Status: 0,\r\n                    Parcelamento: 1\r\n                };\r\n                this.$http.post('http://localhost:5000/api/cliente/adicionar', this.pedido);\r\n            },\r\n            validarJogo(){\r\n                let pedido = {\r\n                    Cliente: this.cliente,\r\n                    Jogo: this.jogo\r\n                }\r\n                this.$http.post('http://localhost:5000/api/cliente/verificarjogosacola', pedido).then(res => {\r\n                    if(res.status == 201){\r\n                        this.messageButton = 'Jogo já adicionado'\r\n                        this.disabledButton = true;\r\n                        this.spawnCompra = false;\r\n                        this.spawnDownload = false; \r\n                    }\r\n                    else if(res.status == 204){\r\n                        this.messageButton = 'Jogo já adquirido'\r\n                        this.disabledButton = true;\r\n                        this.spawnCompra = false;\r\n                        this.spawnDownload = true;\r\n                    }\r\n                    else if (res.status == 200){\r\n                        this.messageButton = 'Adicionar jogo à sacola'\r\n                        this.disabledButton = false;\r\n                        this.spawnCompra = true;\r\n                        this.spawnDownload = false;\r\n                    }\r\n                })\r\n                \r\n            },\r\n            redirectCSacola(){\r\n                 this.$router.push({ name: 'paymentMethod' })\r\n            },\r\n            adicionarJogoSacola(compra){\r\n                let pedido = {\r\n                    Cliente: this.cliente,\r\n                    Jogo: this.jogo\r\n                }\r\n                this.$http.post('http://localhost:5000/api/cliente/adicionarjogosacola', pedido).then(res => {\r\n                    if(res.status == 204){\r\n                        this.messageError = \"Jogo já adquirido\";\r\n                    }else if(res.status == 201){\r\n                        this.messageError = \"Jogo já adicionado\"\r\n                    }else if(res.status == 202){\r\n                        this.messageError = \"Erro ao adicionar\"\r\n                    }else{\r\n                        this.message = \"Jogo Adicionado!\";\r\n                        if(compra){\r\n                            this.$router.push({ name: 'paymentMethod' })\r\n                        }else{\r\n                            this.$router.push({ name: 'store' })\r\n                        }\r\n                    }\r\n                }, res => {\r\n                    console.log(res);\r\n                })\r\n                \r\n            }\r\n        }\r\n    }\r\n    \r\n</script>\r\n\r\n<template>  \r\n    <div>\r\n        <HeaderBar />\r\n        <div class=\"container-fluid detail-container\" style=\"margin-top: 70px\">\r\n            <div class=\"container-fluid\">\r\n                <div class=\"row justify-content-center\">\r\n                    <div class=\"col mt-4\" style=\"margin-left: 15px\">\r\n                        <img :src=\"require(`../assets/${jogo.urlFoto}`)\" class=\"d-block w-100\" />\r\n                    </div>\r\n                    <div class=\"col\" style=\"text-align: center; margin-top: 100px; padding-right: 80px;\">    \r\n                        <h2>{{jogo.nome}}</h2>\r\n                        <div style=\"text-align: center; margin-top: 200px;\">\r\n                            <h4>R$ {{jogo.valor.toFixed(2)}}</h4>\r\n                        </div>\r\n                        <div style=\"align-items: center;\">\r\n                            <div v-if=\"spawnCompra\" class=\"d-grid gap-2 col-5 mx-auto mt-4\">\r\n                                <button class=\"btn btn-lg btt-submit\" @click=\"adicionarJogoSacola(true)\">Comprar Agora</button>\r\n                            </div>\r\n                            <div class=\"d-grid gap-2 col-5 mx-auto mt-4\" >\r\n                                <button class=\"btn btn-lg btt-outline-submit\" @click=\"adicionarJogoSacola(false)\" :disabled=\"disabledButton\">{{this.messageButton}}</button>\r\n                            </div>\r\n                            <div v-if=\"messageButton == 'Jogo já adicionado'\" class=\"d-grid gap-2 col-5 mx-auto mt-4\">\r\n                                <button class=\"btn btn-lg btt-submit\" @click=\"redirectCSacola()\">Ir para sacola</button>\r\n                            </div>\r\n                            <div v-if=\"spawnDownload\" class=\"d-grid gap-2 col-5 mx-auto mt-4\">\r\n                                <a class=\"btn btn-lg btt-submit\" type=\"button\" :href=\"require(`../assets/${jogo.urlFoto}`)\" download=\"\">Download</a>\r\n                            </div>\r\n                             <div v-if=\"message\" class=\"alert alert-success alert-dismissible fade show\" role=\"alert\">\r\n                                {{ message }}\r\n                                <button type=\"button\" @click=\"message = null\" data-dismiss=\"alert\"\r\n                                    aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                            <div v-if=\"messageError\" class=\"alert alert-danger alert-dismissible fade show\"\r\n                                role=\"alert\">\r\n                                {{ messageError }}\r\n                                <button type=\"button\" @click=\"messageError = null\" data-dismiss=\"alert\"\r\n                                    aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row justify-content-left\">\r\n                    <div class=\"col-3 mt-1\" style=\"margin-left: 15px\">\r\n                        <p><b>{{jogo.descricao}}</b></p><br>\r\n                    </div>\r\n                    <div class=\"col-3 mt-1 mb-5\" style=\"margin-left: 15px\">\r\n                        <p><b>Data de Lançamento: </b>{{formatDate(jogo.dataLancamento)}}</p><br>\r\n                        <p><b>Categoria: </b>{{jogo.categoria}}</p>\r\n                        <p><b>Calssificação: </b>{{jogo.classificacao}}</p>\r\n                        <p><b>Tamanho: </b>{{jogo.tamanho}}</p>\r\n                        <p><b>Desenvolvedora: </b>{{jogo.desenvolvedora}}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <FooterBar />\r\n    </div>\r\n</template>\r\n\r\n\r\n<style scoped>\r\n    .detail-container{\r\n        color: #ffff;\r\n    }\r\n\r\n    .btt-submit{\r\n        color: #ffff;\r\n        background-color: #340E80;\r\n    }\r\n\r\n    .btt-submit:hover{\r\n        color: #ffff;\r\n        background-color: #7e64b3;\r\n    }\r\n\r\n    .btt-outline-submit{\r\n        color: #ffff;\r\n        border: 1px solid #340E80;\r\n    }\r\n\r\n    .btt-outline-submit:hover{\r\n        color: #ffff;\r\n        border: 1px solid #340E80;\r\n        background-color: #413f3f;\r\n    }\r\n</style>"]}]}