{"remainingRequest":"C:\\ws\\rak-front\\rakgameshop_client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ws\\rak-front\\rakgameshop_client\\src\\components\\JogoCompra.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ws\\rak-front\\rakgameshop_client\\src\\components\\JogoCompra.vue","mtime":1655942081513},{"path":"C:\\ws\\rak-front\\rakgameshop_client\\node_modules\\babel-loader\\lib\\index.js","mtime":1655946248007},{"path":"C:\\ws\\rak-front\\rakgameshop_client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655946238528},{"path":"C:\\ws\\rak-front\\rakgameshop_client\\node_modules\\vue-loader\\lib\\index.js","mtime":1655946250137}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBIZWFkZXJCYXIgZnJvbSAiLi9zaGFyZWQvSGVhZGVyQmFyQmFnLnZ1ZSI7CmltcG9ydCBGb290ZXJCYXIgZnJvbSAiLi9zaGFyZWQvRm9vdGVyQmFyLnZ1ZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgSGVhZGVyQmFyLAogICAgICAgIEZvb3RlckJhcgogICAgfSwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIGlkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQucmVwbGFjZSgiOiIsICIiKSwKICAgICAgICAgICAgam9nbzoge30sCiAgICAgICAgICAgIGpvZ29zOiBbXSwKICAgICAgICAgICAgdXN1YXJpbzoge30sCiAgICAgICAgICAgIGNsaWVudGU6IHt9LAogICAgICAgICAgICBtZXNzYWdlOiAiIiwKICAgICAgICAgICAgbWVzc2FnZUVycm9yOiAiIiwKICAgICAgICAgICAgbWVzc2FnZUJ1dHRvbjogJ0FkaWNpb25hciBqb2dvIMOgIHNhY29sYScsCiAgICAgICAgICAgIGRpc2FibGVkQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgc3Bhd25Db21wcmE6IHRydWUsCiAgICAgICAgICAgIHNwYXduRG93bmxvYWQ6IGZhbHNlCiAgICAgICAgfQogICAgICAgIAogICAgfSwKICAgIG1vdW50ZWQoKXsKICAgICAgICB0aGlzLmF0dWFsaXphUGFnaW5hKCk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGF0dWFsaXphUGFnaW5hKCl7CiAgICAgICAgICAgIHRoaXMudXN1YXJpbyA9IHRoaXMuJHJvb3QudXN1YXJpbzsKICAgICAgICAgICAgaWYodGhpcy51c3VhcmlvID09IG51bGwpewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ2xvZ2luJyB9KQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuJGh0dHAuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXBpL2FkbWluL2J1c2NhcmpvZ29zJykudGhlbihyZXMgPT57CiAgICAgICAgICAgICAgICB0aGlzLmpvZ29zID0gcmVzLmJvZHk7CiAgICAgICAgICAgICAgICB0aGlzLmpvZ29zLm1hcChqID0+IHsgICAKICAgICAgICAgICAgICAgICAgICBpZihqLmlkID09IHRoaXMuaWQpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmpvZ28gPSBqOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sIHJlcyA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy4kaHR0cC5wb3N0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXBpL2NsaWVudGUvYnVzY2FyY2xpZW50ZScsIHRoaXMudXN1YXJpbykudGhlbihyZXMgPT57CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudGUgPSByZXMuYm9keTsKICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhckpvZ28oKTsKICAgICAgICAgICAgfSwgcmVzID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgZm9ybWF0RGF0ZShkYXRlKSB7CiAgICAgICAgICAgIGxldCBkID0gbmV3IERhdGUoZGF0ZSk7CiAgICAgICAgICAgIGxldCBtb250aCA9IChkLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpOwogICAgICAgICAgICBsZXQgZGF5ID0gZC5nZXREYXRlKCkudG9TdHJpbmcoKTsKICAgICAgICAgICAgbGV0IHllYXIgPSBkLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICAgIGlmIChtb250aC5sZW5ndGggPCAyKSB7CiAgICAgICAgICAgICAgICBtb250aCA9ICcwJyArIG1vbnRoOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChkYXkubGVuZ3RoIDwgMikgewogICAgICAgICAgICAgICAgZGF5ID0gJzAnICsgZGF5OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBbZGF5LCBtb250aCwgeWVhcl0uam9pbignLycpOwogICAgICAgIH0sCiAgICAgICAgcHVzaFBlZGlkbygpewogICAgICAgICAgICBsZXQgaiA9IFtdCiAgICAgICAgICAgIGoucHVzaCh0aGlzLmpvZ28pOwogICAgICAgICAgICB0aGlzLnBlZGlkbyA9IHsKICAgICAgICAgICAgICAgIENsaWVudGU6IHRoaXMuY2xpZW50ZSwKICAgICAgICAgICAgICAgIEpvZ29zOiBqLAogICAgICAgICAgICAgICAgRGF0YUNvbXByYTogIiIsCiAgICAgICAgICAgICAgICBGb3JtYVBhZ2FtZW50bzogbnVsbCwKICAgICAgICAgICAgICAgIFZhbG9yVG90YWw6IDAsCiAgICAgICAgICAgICAgICBTdGF0dXM6IDAsCiAgICAgICAgICAgICAgICBQYXJjZWxhbWVudG86IDEKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy4kaHR0cC5wb3N0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXBpL2NsaWVudGUvYWRpY2lvbmFyJywgdGhpcy5wZWRpZG8pOwogICAgICAgIH0sCiAgICAgICAgdmFsaWRhckpvZ28oKXsKICAgICAgICAgICAgbGV0IHBlZGlkbyA9IHsKICAgICAgICAgICAgICAgIENsaWVudGU6IHRoaXMuY2xpZW50ZSwKICAgICAgICAgICAgICAgIEpvZ286IHRoaXMuam9nbwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuJGh0dHAucG9zdCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2FwaS9jbGllbnRlL3ZlcmlmaWNhcmpvZ29zYWNvbGEnLCBwZWRpZG8pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIGlmKHJlcy5zdGF0dXMgPT0gMjAxKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VCdXR0b24gPSAnSm9nbyBqw6EgYWRpY2lvbmFkbycKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVkQnV0dG9uID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNwYXduQ29tcHJhID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGF3bkRvd25sb2FkID0gZmFsc2U7IAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZihyZXMuc3RhdHVzID09IDIwNCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlQnV0dG9uID0gJ0pvZ28gasOhIGFkcXVpcmlkbycKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVkQnV0dG9uID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNwYXduQ29tcHJhID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGF3bkRvd25sb2FkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VCdXR0b24gPSAnQWRpY2lvbmFyIGpvZ28gw6Agc2Fjb2xhJwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZWRCdXR0b24gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNwYXduQ29tcHJhID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNwYXduRG93bmxvYWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgCiAgICAgICAgfSwKICAgICAgICByZWRpcmVjdENTYWNvbGEoKXsKICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ3BheW1lbnRNZXRob2QnIH0pCiAgICAgICAgfSwKICAgICAgICBhZGljaW9uYXJKb2dvU2Fjb2xhKGNvbXByYSl7CiAgICAgICAgICAgIGxldCBwZWRpZG8gPSB7CiAgICAgICAgICAgICAgICBDbGllbnRlOiB0aGlzLmNsaWVudGUsCiAgICAgICAgICAgICAgICBKb2dvOiB0aGlzLmpvZ28KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRodHRwLnBvc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hcGkvY2xpZW50ZS9hZGljaW9uYXJqb2dvc2Fjb2xhJywgcGVkaWRvKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBpZihyZXMuc3RhdHVzID09IDIwNCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlRXJyb3IgPSAiSm9nbyBqw6EgYWRxdWlyaWRvIjsKICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJlcy5zdGF0dXMgPT0gMjAxKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VFcnJvciA9ICJKb2dvIGrDoSBhZGljaW9uYWRvIgogICAgICAgICAgICAgICAgfWVsc2UgaWYocmVzLnN0YXR1cyA9PSAyMDIpewogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZUVycm9yID0gIkVycm8gYW8gYWRpY2lvbmFyIgogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gIkpvZ28gQWRpY2lvbmFkbyEiOwogICAgICAgICAgICAgICAgICAgIGlmKGNvbXByYSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ3BheW1lbnRNZXRob2QnIH0pCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ3N0b3JlJyB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgcmVzID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIAogICAgICAgIH0KICAgIH0KfQoK"},{"version":3,"sources":["JogoCompra.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"JogoCompra.vue","sourceRoot":"src/components","sourcesContent":["<script>\r\n    import HeaderBar from \"./shared/HeaderBarBag.vue\";\r\n    import FooterBar from \"./shared/FooterBar.vue\";\r\n\r\n    export default {\r\n        components: {\r\n            HeaderBar,\r\n            FooterBar\r\n        },\r\n        data(){\r\n            return{\r\n                id: this.$route.params.id.replace(\":\", \"\"),\r\n                jogo: {},\r\n                jogos: [],\r\n                usuario: {},\r\n                cliente: {},\r\n                message: \"\",\r\n                messageError: \"\",\r\n                messageButton: 'Adicionar jogo à sacola',\r\n                disabledButton: false,\r\n                spawnCompra: true,\r\n                spawnDownload: false\r\n            }\r\n            \r\n        },\r\n        mounted(){\r\n            this.atualizaPagina();\r\n        },\r\n        methods: {\r\n            atualizaPagina(){\r\n                this.usuario = this.$root.usuario;\r\n                if(this.usuario == null){\r\n                    return this.$router.push({ name: 'login' })\r\n                }\r\n                this.$http.get('http://localhost:5000/api/admin/buscarjogos').then(res =>{\r\n                    this.jogos = res.body;\r\n                    this.jogos.map(j => {   \r\n                        if(j.id == this.id){\r\n                            this.jogo = j;\r\n                        }\r\n                    })\r\n                }, res => {\r\n                    console.log(res);\r\n                });\r\n                this.$http.post('http://localhost:5000/api/cliente/buscarcliente', this.usuario).then(res =>{\r\n                    this.cliente = res.body;\r\n                    this.validarJogo();\r\n                }, res => {\r\n                    console.log(res);\r\n                });\r\n            },\r\n            formatDate(date) {\r\n                let d = new Date(date);\r\n                let month = (d.getMonth() + 1).toString();\r\n                let day = d.getDate().toString();\r\n                let year = d.getFullYear();\r\n                if (month.length < 2) {\r\n                    month = '0' + month;\r\n                }\r\n                if (day.length < 2) {\r\n                    day = '0' + day;\r\n                }\r\n                return [day, month, year].join('/');\r\n            },\r\n            pushPedido(){\r\n                let j = []\r\n                j.push(this.jogo);\r\n                this.pedido = {\r\n                    Cliente: this.cliente,\r\n                    Jogos: j,\r\n                    DataCompra: \"\",\r\n                    FormaPagamento: null,\r\n                    ValorTotal: 0,\r\n                    Status: 0,\r\n                    Parcelamento: 1\r\n                };\r\n                this.$http.post('http://localhost:5000/api/cliente/adicionar', this.pedido);\r\n            },\r\n            validarJogo(){\r\n                let pedido = {\r\n                    Cliente: this.cliente,\r\n                    Jogo: this.jogo\r\n                }\r\n                this.$http.post('http://localhost:5000/api/cliente/verificarjogosacola', pedido).then(res => {\r\n                    if(res.status == 201){\r\n                        this.messageButton = 'Jogo já adicionado'\r\n                        this.disabledButton = true;\r\n                        this.spawnCompra = false;\r\n                        this.spawnDownload = false; \r\n                    }\r\n                    else if(res.status == 204){\r\n                        this.messageButton = 'Jogo já adquirido'\r\n                        this.disabledButton = true;\r\n                        this.spawnCompra = false;\r\n                        this.spawnDownload = true;\r\n                    }\r\n                    else if (res.status == 200){\r\n                        this.messageButton = 'Adicionar jogo à sacola'\r\n                        this.disabledButton = false;\r\n                        this.spawnCompra = true;\r\n                        this.spawnDownload = false;\r\n                    }\r\n                })\r\n                \r\n            },\r\n            redirectCSacola(){\r\n                 this.$router.push({ name: 'paymentMethod' })\r\n            },\r\n            adicionarJogoSacola(compra){\r\n                let pedido = {\r\n                    Cliente: this.cliente,\r\n                    Jogo: this.jogo\r\n                }\r\n                this.$http.post('http://localhost:5000/api/cliente/adicionarjogosacola', pedido).then(res => {\r\n                    if(res.status == 204){\r\n                        this.messageError = \"Jogo já adquirido\";\r\n                    }else if(res.status == 201){\r\n                        this.messageError = \"Jogo já adicionado\"\r\n                    }else if(res.status == 202){\r\n                        this.messageError = \"Erro ao adicionar\"\r\n                    }else{\r\n                        this.message = \"Jogo Adicionado!\";\r\n                        if(compra){\r\n                            this.$router.push({ name: 'paymentMethod' })\r\n                        }else{\r\n                            this.$router.push({ name: 'store' })\r\n                        }\r\n                    }\r\n                }, res => {\r\n                    console.log(res);\r\n                })\r\n                \r\n            }\r\n        }\r\n    }\r\n    \r\n</script>\r\n\r\n<template>  \r\n    <div>\r\n        <HeaderBar />\r\n        <div class=\"container-fluid detail-container\" style=\"margin-top: 70px\">\r\n            <div class=\"container-fluid\">\r\n                <div class=\"row justify-content-center\">\r\n                    <div class=\"col mt-4\" style=\"margin-left: 15px\">\r\n                        <img :src=\"require(`../assets/${jogo.urlFoto}`)\" class=\"d-block w-100\" />\r\n                    </div>\r\n                    <div class=\"col\" style=\"text-align: center; margin-top: 100px; padding-right: 80px;\">    \r\n                        <h2>{{jogo.nome}}</h2>\r\n                        <div style=\"text-align: center; margin-top: 200px;\">\r\n                            <h4>R$ {{jogo.valor.toFixed(2)}}</h4>\r\n                        </div>\r\n                        <div style=\"align-items: center;\">\r\n                            <div v-if=\"spawnCompra\" class=\"d-grid gap-2 col-5 mx-auto mt-4\">\r\n                                <button class=\"btn btn-lg btt-submit\" @click=\"adicionarJogoSacola(true)\">Comprar Agora</button>\r\n                            </div>\r\n                            <div class=\"d-grid gap-2 col-5 mx-auto mt-4\" >\r\n                                <button class=\"btn btn-lg btt-outline-submit\" @click=\"adicionarJogoSacola(false)\" :disabled=\"disabledButton\">{{this.messageButton}}</button>\r\n                            </div>\r\n                            <div v-if=\"messageButton == 'Jogo já adicionado'\" class=\"d-grid gap-2 col-5 mx-auto mt-4\">\r\n                                <button class=\"btn btn-lg btt-submit\" @click=\"redirectCSacola()\">Ir para sacola</button>\r\n                            </div>\r\n                            <div v-if=\"spawnDownload\" class=\"d-grid gap-2 col-5 mx-auto mt-4\">\r\n                                <a class=\"btn btn-lg btt-submit\" type=\"button\" :href=\"require(`../assets/${jogo.urlFoto}`)\" download=\"\">Download</a>\r\n                            </div>\r\n                             <div v-if=\"message\" class=\"alert alert-success alert-dismissible fade show\" role=\"alert\">\r\n                                {{ message }}\r\n                                <button type=\"button\" @click=\"message = null\" data-dismiss=\"alert\"\r\n                                    aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                            <div v-if=\"messageError\" class=\"alert alert-danger alert-dismissible fade show\"\r\n                                role=\"alert\">\r\n                                {{ messageError }}\r\n                                <button type=\"button\" @click=\"messageError = null\" data-dismiss=\"alert\"\r\n                                    aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row justify-content-left\">\r\n                    <div class=\"col-3 mt-1\" style=\"margin-left: 15px\">\r\n                        <p><b>{{jogo.descricao}}</b></p><br>\r\n                    </div>\r\n                    <div class=\"col-3 mt-1 mb-5\" style=\"margin-left: 15px\">\r\n                        <p><b>Data de Lançamento: </b>{{formatDate(jogo.dataLancamento)}}</p><br>\r\n                        <p><b>Categoria: </b>{{jogo.categoria}}</p>\r\n                        <p><b>Calssificação: </b>{{jogo.classificacao}}</p>\r\n                        <p><b>Tamanho: </b>{{jogo.tamanho}}</p>\r\n                        <p><b>Desenvolvedora: </b>{{jogo.desenvolvedora}}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <FooterBar />\r\n    </div>\r\n</template>\r\n\r\n\r\n<style scoped>\r\n    .detail-container{\r\n        color: #ffff;\r\n    }\r\n\r\n    .btt-submit{\r\n        color: #ffff;\r\n        background-color: #340E80;\r\n    }\r\n\r\n    .btt-submit:hover{\r\n        color: #ffff;\r\n        background-color: #7e64b3;\r\n    }\r\n\r\n    .btt-outline-submit{\r\n        color: #ffff;\r\n        border: 1px solid #340E80;\r\n    }\r\n\r\n    .btt-outline-submit:hover{\r\n        color: #ffff;\r\n        border: 1px solid #340E80;\r\n        background-color: #413f3f;\r\n    }\r\n</style>"]}]}